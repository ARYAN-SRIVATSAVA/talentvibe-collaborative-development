{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./JobsPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JobsListPage=()=>{const[jobs,setJobs]=useState([]);const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(true);const[deletingJobId,setDeletingJobId]=useState(null);useEffect(()=>{fetchJobs();// Auto-refresh every 10 seconds to show new processed resumes\nconst interval=setInterval(()=>{fetchJobs();},10000);return()=>clearInterval(interval);},[]);const fetchJobs=async()=>{try{const response=await fetch('/api/jobs');if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();setJobs(data);}catch(error){setError(error.message);}finally{setIsLoading(false);}};const handleDeleteJob=async(jobId,jobDescription)=>{var _jobs$find;const confirmMessage=\"Are you sure you want to delete this job?\\n\\n\\\"\".concat(jobDescription.substring(0,100),\"...\\\"\\n\\nThis will permanently delete the job and all \").concat(((_jobs$find=jobs.find(j=>j.id===jobId))===null||_jobs$find===void 0?void 0:_jobs$find.resume_count)||0,\" associated resumes. This action cannot be undone.\");if(!window.confirm(confirmMessage)){return;}setDeletingJobId(jobId);try{const response=await fetch(\"/api/jobs/\".concat(jobId),{method:'DELETE'});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to delete job');}// const result = await response.json();\n// Refresh the jobs list\nawait fetchJobs();}catch(error){setError(\"Failed to delete job: \".concat(error.message));}finally{setDeletingJobId(null);}};const truncateText=(text,length)=>{if(text.length<=length)return text;return text.substring(0,length)+'...';};return/*#__PURE__*/_jsxs(\"div\",{className:\"jobs-page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Active Job Roles\"}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading jobs...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"message error\",children:[\"Error: \",error]}),!isLoading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"jobs-grid\",children:jobs.length>0?jobs.map(job=>/*#__PURE__*/_jsxs(\"div\",{className:\"glass-container job-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:truncateText(job.description,100)}),/*#__PURE__*/_jsx(\"div\",{className:\"job-card-meta\",children:job.resume_count===0?/*#__PURE__*/_jsx(\"span\",{className:\"processing-indicator\",children:\"\\uD83D\\uDD04 Processing...\"}):/*#__PURE__*/_jsxs(\"span\",{children:[job.resume_count,\" R\\xE9sum\\xE9s\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-card-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/jobs/\".concat(job.id),className:\"details-button\",children:job.resume_count===0?'View Status':'View Analysis'}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteJob(job.id,job.description),disabled:deletingJobId===job.id,children:deletingJobId===job.id?'Deleting...':'Delete'})]})]},job.id)):/*#__PURE__*/_jsxs(\"p\",{children:[\"No jobs submitted yet. \",/*#__PURE__*/_jsx(Link,{to:\"/upload\",children:\"Upload one now!\"})]})})]});};export default JobsListPage;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","JobsListPage","jobs","setJobs","error","setError","isLoading","setIsLoading","deletingJobId","setDeletingJobId","fetchJobs","interval","setInterval","clearInterval","response","fetch","ok","Error","data","json","message","handleDeleteJob","jobId","jobDescription","_jobs$find","confirmMessage","concat","substring","find","j","id","resume_count","window","confirm","method","errorData","truncateText","text","length","className","children","map","job","description","to","onClick","disabled"],"sources":["/Users/aryansrivatsavadande/Downloads/talentvibe_withoutapi_cleaned/frontend/src/JobsListPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './JobsPage.css';\n\nconst JobsListPage = () => {\n    const [jobs, setJobs] = useState([]);\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [deletingJobId, setDeletingJobId] = useState(null);\n\n    useEffect(() => {\n        fetchJobs();\n        \n        // Auto-refresh every 10 seconds to show new processed resumes\n        const interval = setInterval(() => {\n            fetchJobs();\n        }, 10000);\n        \n        return () => clearInterval(interval);\n    }, []);\n\n    const fetchJobs = async () => {\n        try {\n            const response = await fetch('/api/jobs');\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n            setJobs(data);\n        } catch (error) {\n            setError(error.message);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleDeleteJob = async (jobId, jobDescription) => {\n        const confirmMessage = `Are you sure you want to delete this job?\\n\\n\"${jobDescription.substring(0, 100)}...\"\\n\\nThis will permanently delete the job and all ${jobs.find(j => j.id === jobId)?.resume_count || 0} associated resumes. This action cannot be undone.`;\n        \n        if (!window.confirm(confirmMessage)) {\n            return;\n        }\n\n        setDeletingJobId(jobId);\n        \n        try {\n            const response = await fetch(`/api/jobs/${jobId}`, {\n                method: 'DELETE',\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.error || 'Failed to delete job');\n            }\n\n            // const result = await response.json();\n            \n            // Refresh the jobs list\n            await fetchJobs();\n            \n        } catch (error) {\n            setError(`Failed to delete job: ${error.message}`);\n        } finally {\n            setDeletingJobId(null);\n        }\n    };\n\n    const truncateText = (text, length) => {\n        if (text.length <= length) return text;\n        return text.substring(0, length) + '...';\n    };\n\n    return (\n        <div className=\"jobs-page-container\">\n            <h2>Active Job Roles</h2>\n            {isLoading && <p>Loading jobs...</p>}\n            {error && <p className=\"message error\">Error: {error}</p>}\n            {!isLoading && !error && (\n                <div className=\"jobs-grid\">\n                    {jobs.length > 0 ? (\n                        jobs.map(job => (\n                            <div key={job.id} className=\"glass-container job-card\">\n                                <h3>{truncateText(job.description, 100)}</h3>\n                                <div className=\"job-card-meta\">\n                                    {job.resume_count === 0 ? (\n                                        <span className=\"processing-indicator\">ðŸ”„ Processing...</span>\n                                    ) : (\n                                        <span>{job.resume_count} RÃ©sumÃ©s</span>\n                                    )}\n                                </div>\n                                <div className=\"job-card-actions\">\n                                    <Link to={`/jobs/${job.id}`} className=\"details-button\">\n                                        {job.resume_count === 0 ? 'View Status' : 'View Analysis'}\n                                    </Link>\n                                    <button \n                                        className=\"delete-button\"\n                                        onClick={() => handleDeleteJob(job.id, job.description)}\n                                        disabled={deletingJobId === job.id}\n                                    >\n                                        {deletingJobId === job.id ? 'Deleting...' : 'Delete'}\n                                    </button>\n                                </div>\n                            </div>\n                        ))\n                    ) : (\n                        <p>No jobs submitted yet. <Link to=\"/upload\">Upload one now!</Link></p>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default JobsListPage; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACY,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACc,aAAa,CAAEC,gBAAgB,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExDC,SAAS,CAAC,IAAM,CACZe,SAAS,CAAC,CAAC,CAEX;AACA,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CAC/BF,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,KAAK,CAAC,CAET,MAAO,IAAMG,aAAa,CAACF,QAAQ,CAAC,CACxC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAD,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,WAAW,CAAC,CACzC,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CAClD,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClChB,OAAO,CAACe,IAAI,CAAC,CACjB,CAAE,MAAOd,KAAK,CAAE,CACZC,QAAQ,CAACD,KAAK,CAACgB,OAAO,CAAC,CAC3B,CAAC,OAAS,CACNb,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAED,KAAM,CAAAc,eAAe,CAAG,KAAAA,CAAOC,KAAK,CAAEC,cAAc,GAAK,KAAAC,UAAA,CACrD,KAAM,CAAAC,cAAc,mDAAAC,MAAA,CAAoDH,cAAc,CAACI,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,2DAAAD,MAAA,CAAwD,EAAAF,UAAA,CAAAtB,IAAI,CAAC0B,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKR,KAAK,CAAC,UAAAE,UAAA,iBAA9BA,UAAA,CAAgCO,YAAY,GAAI,CAAC,sDAAoD,CAErQ,GAAI,CAACC,MAAM,CAACC,OAAO,CAACR,cAAc,CAAC,CAAE,CACjC,OACJ,CAEAhB,gBAAgB,CAACa,KAAK,CAAC,CAEvB,GAAI,CACA,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAAC,KAAK,cAAAW,MAAA,CAAcJ,KAAK,EAAI,CAC/CY,MAAM,CAAE,QACZ,CAAC,CAAC,CAEF,GAAI,CAACpB,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,CAAAmB,SAAS,CAAG,KAAM,CAAArB,QAAQ,CAACK,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAF,KAAK,CAACkB,SAAS,CAAC/B,KAAK,EAAI,sBAAsB,CAAC,CAC9D,CAEA;AAEA;AACA,KAAM,CAAAM,SAAS,CAAC,CAAC,CAErB,CAAE,MAAON,KAAK,CAAE,CACZC,QAAQ,0BAAAqB,MAAA,CAA0BtB,KAAK,CAACgB,OAAO,CAAE,CAAC,CACtD,CAAC,OAAS,CACNX,gBAAgB,CAAC,IAAI,CAAC,CAC1B,CACJ,CAAC,CAED,KAAM,CAAA2B,YAAY,CAAGA,CAACC,IAAI,CAAEC,MAAM,GAAK,CACnC,GAAID,IAAI,CAACC,MAAM,EAAIA,MAAM,CAAE,MAAO,CAAAD,IAAI,CACtC,MAAO,CAAAA,IAAI,CAACV,SAAS,CAAC,CAAC,CAAEW,MAAM,CAAC,CAAG,KAAK,CAC5C,CAAC,CAED,mBACItC,KAAA,QAAKuC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAChC1C,IAAA,OAAA0C,QAAA,CAAI,kBAAgB,CAAI,CAAC,CACxBlC,SAAS,eAAIR,IAAA,MAAA0C,QAAA,CAAG,iBAAe,CAAG,CAAC,CACnCpC,KAAK,eAAIJ,KAAA,MAAGuC,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,SAAO,CAACpC,KAAK,EAAI,CAAC,CACxD,CAACE,SAAS,EAAI,CAACF,KAAK,eACjBN,IAAA,QAAKyC,SAAS,CAAC,WAAW,CAAAC,QAAA,CACrBtC,IAAI,CAACoC,MAAM,CAAG,CAAC,CACZpC,IAAI,CAACuC,GAAG,CAACC,GAAG,eACR1C,KAAA,QAAkBuC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eAClD1C,IAAA,OAAA0C,QAAA,CAAKJ,YAAY,CAACM,GAAG,CAACC,WAAW,CAAE,GAAG,CAAC,CAAK,CAAC,cAC7C7C,IAAA,QAAKyC,SAAS,CAAC,eAAe,CAAAC,QAAA,CACzBE,GAAG,CAACX,YAAY,GAAK,CAAC,cACnBjC,IAAA,SAAMyC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,4BAAgB,CAAM,CAAC,cAE9DxC,KAAA,SAAAwC,QAAA,EAAOE,GAAG,CAACX,YAAY,CAAC,gBAAQ,EAAM,CACzC,CACA,CAAC,cACN/B,KAAA,QAAKuC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7B1C,IAAA,CAACF,IAAI,EAACgD,EAAE,UAAAlB,MAAA,CAAWgB,GAAG,CAACZ,EAAE,CAAG,CAACS,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAClDE,GAAG,CAACX,YAAY,GAAK,CAAC,CAAG,aAAa,CAAG,eAAe,CACvD,CAAC,cACPjC,IAAA,WACIyC,SAAS,CAAC,eAAe,CACzBM,OAAO,CAAEA,CAAA,GAAMxB,eAAe,CAACqB,GAAG,CAACZ,EAAE,CAAEY,GAAG,CAACC,WAAW,CAAE,CACxDG,QAAQ,CAAEtC,aAAa,GAAKkC,GAAG,CAACZ,EAAG,CAAAU,QAAA,CAElChC,aAAa,GAAKkC,GAAG,CAACZ,EAAE,CAAG,aAAa,CAAG,QAAQ,CAChD,CAAC,EACR,CAAC,GApBAY,GAAG,CAACZ,EAqBT,CACR,CAAC,cAEF9B,KAAA,MAAAwC,QAAA,EAAG,yBAAuB,cAAA1C,IAAA,CAACF,IAAI,EAACgD,EAAE,CAAC,SAAS,CAAAJ,QAAA,CAAC,iBAAe,CAAM,CAAC,EAAG,CACzE,CACA,CACR,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAvC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}